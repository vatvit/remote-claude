---
title: Host server with Claude Code SDK integration
status: completed
type: feature
priority: high
epic: remote-control
---

## Workflow

| # | Step | Status | Notes |
|---|------|--------|-------|
| 10 | Requirements | skipped | Defined in task + epic |
| 20 | BDD | skipped | |
| 30 | Assessment | done | SDK researched, package renamed to @anthropic-ai/claude-agent-sdk |
| 40 | POC | skipped | |
| 50 | Domain | skipped | |
| 60 | Architecture | done | query() async generator, session_id resume, SSE later |
| 70 | Tests | skipped | |
| 80 | Subtasks | skipped | |
| 90 | Implementation | done | Server + SDK integration verified |
| 100 | Tech Debt | skipped | |
| 110 | Reflection | done | |

## Description

Create the core Express server (`host/server.js`) that integrates with the @anthropic-ai/claude-code SDK.

**Deliverables:**
- Express server listening on port 3000
- Serves static files from `web/` directory
- Claude Code SDK initialization with configurable working directory (env var)
- Single session management â€” maintain one Claude conversation
- Graceful shutdown handling

**Questions to clarify during implementation:**
- How does the @anthropic-ai/claude-code SDK work? (research SDK docs/API)
- How to manage conversation continuity (session ID, message history)?
- What env vars are needed? (ANTHROPIC_API_KEY, WORK_DIR, etc.)
