---
title: IP whitelist for incoming commands
status: proposed
type: feature
priority: critical
---

## Workflow

| # | Step | Status | Notes |
|---|------|--------|-------|
| 10 | Requirements | — | |
| 20 | Assessment | — | |
| 30 | Architecture | — | |
| 40 | Tests | — | |
| 50 | Subtasks | — | |
| 60 | Implementation | — | |
| 70 | Tech Debt | — | |
| 80 | Reflection | — | |

## Description

Implement IP whitelist filtering on the host server so that only requests from allowed IP addresses can send commands to Claude Code.

This is **mandatory** — the server must reject any incoming request to command/control endpoints (`POST /api/command` and potentially other sensitive endpoints) if the source IP is not in the configured whitelist.

### Requirements

- Configurable list of allowed IPs (e.g., via environment variable or config file)
- Reject requests from non-whitelisted IPs with 403 Forbidden
- Apply to all sensitive API endpoints (at minimum `POST /api/command`)
- Log rejected attempts (IP + timestamp)
- Support CIDR notation (e.g., `192.168.1.0/24`) — nice to have
