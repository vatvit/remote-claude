---
title: Host-side admin UI
status: in-progress
type: feature
priority: high
epic: remote-control
---

## Workflow

| # | Step | Status | Notes |
|---|------|--------|-------|
| 10 | Requirements | done | |
| 20 | Assessment | done | |
| 30 | Architecture | — | |
| 40 | Tests | — | |
| 50 | Subtasks | — | |
| 60 | Implementation | — | |
| 70 | Tech Debt | — | |
| 80 | Reflection | — | |

## Description

Separate admin/management UI served on port 8887 (host-side only). Provides visibility and control over the Remote Claude server.

**Features:**
- View active session info (session ID, start time, message count)
- View conversation history / live activity
- See connected client IPs
- IP whitelist management (allow/block clients)
- Select / change working directory (folder picker or input)
- Server status overview (uptime, memory, Claude Code process state)

**Technical notes:**
- Separate Express app or separate route mount on a second port
- Static HTML/CSS/JS like the client UI (no framework)
- Shares state with the main server (same process, different port)
- Could potentially restrict access to localhost only (since it's the host machine)

## Requirements

### Access
- Served on port 8887, accessible from WLAN (same as client UI)
- Static HTML/CSS/JS — no framework, consistent with client UI style

### Features (MVP)
1. **Server status** — uptime, Claude process state, bridge reachability
2. **Session info** — session ID, start time, message count
3. **Conversation history** — view past messages (read-only)
4. **Connected clients** — list of client IPs that have sent commands
5. **IP whitelist management** — add/remove allowed IPs (ties into RCL-008)
6. **Working directory** — display current workdir; change requires server restart

### Decisions
- WLAN accessible (not localhost-only)
- No live streaming / log viewer in admin UI
- No kill-command feature for now
- Working directory change requires restart (saved to config, applied on next start)
- Listed features are enough — no additional admin actions

### Technical Constraints
- Same Docker container as client server (single Node.js process, two ports)
- Shares in-memory state with main Express app (conversationHistory, etc.)
- Admin API endpoints prefixed with `/admin/api/...` on port 8887
- Admin static files served from `admin/` directory

## Assessment

### Existing State
- `server.js` — single Express app on port 8888. Needs second app on 8887.
- `docker-compose.yml` — only exposes 8888. Needs 8887 added.
- `conversationHistory` in-memory array — admin can read directly (same process).
- No client IP tracking — needs to be added (record IPs on `/api/command`).
- No IP whitelist logic yet — RCL-008 is separate, admin UI just needs CRUD for the list.
- Bridge status already available via `GET /status` proxy.

### Changes Needed
1. **server.js** — create second Express app, listen on 8887, add admin API routes
2. **docker-compose.yml** — expose port 8887
3. **admin/** — new directory for static HTML/CSS/JS
4. **Shared state** — extract `conversationHistory` and add `clientIPs` tracking, `ipWhitelist` set, `serverStartTime`
